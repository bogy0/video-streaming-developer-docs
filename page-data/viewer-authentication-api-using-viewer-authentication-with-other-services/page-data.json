{"componentChunkName":"component---src-pages-viewer-authentication-api-using-viewer-authentication-with-other-services-mdx","path":"/viewer-authentication-api-using-viewer-authentication-with-other-services/","result":{"pageContext":{"frontmatter":{"title":"Using viewer authentication with other services","description":"Using viewer authentication with other services"},"relativePagePath":"/viewer-authentication-api-using-viewer-authentication-with-other-services.mdx","titleType":"page","MdxNode":{"id":"b8842fa0-650c-5cfc-a462-0538a7372b51","children":[],"parent":"7c804b32-def9-55f7-a143-f5df32b758cb","internal":{"content":"---\ntitle: Using viewer authentication with other services\ndescription: Using viewer authentication with other services\n---\n\nBesides the player there are some services (such as Chat, Q&A and Combined Embed) that may also require viewer authentication. In order to make the authentication work across these services, additional steps need to be taken at the end of the authentication flow.\n\nThese services provide a URL, that must be used instead of the default pass url. This URL is sent in the hashConsumer query parameter by the service to the application.\n\nExample url in the hashConsumer for chat:\n\n```\nhttps://video.ibm.com/chat/authorize/12345678?resource=%2Fchat%2F12345678\n```\n\nExample script in native PHP that can authenticate the player and the services as well\n\n```js\n// Given a json token has already been constructed\n$json = json_encode($response);\n\n// Default hash consumer for the player\n$hashConsumer = 'https://video.ibm.com/embed/hashlock/pass';\n$query = [];\n\n// Check if there is a special hash consumer\nif (!empty($_GET['hashConsumer'])) {\n    $hashConsumer = $_GET['hashConsumer'];\n\n    // It's recommended to use a better URL parsing\n    // technique (like PSR-7 implementations)\n    $parts = parse_url($hashConsumer);\n\n    if (!empty($parts['query'])) {\n        parse_str($parts['query'], $query);\n    }\n\n    // Instead of concatenating url parts it's recommended to use\n    // a better URL parsing technique (like PSR-7 implementations)\n    $hashConsumer = $parts['scheme'].'://'.$parts['host'].$parts['path'];\n}\n\n$query['hash'] = $json;\n\n$hashConsumer = $hashConsumer.'?'.http_build_query($query);\n\nheader('Location: '.$hashConsumer);\n```\n","type":"Mdx","contentDigest":"b681ff8ac7f583cb824c7c4017e30f5e","counter":338,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Using viewer authentication with other services","description":"Using viewer authentication with other services"},"exports":{},"rawBody":"---\ntitle: Using viewer authentication with other services\ndescription: Using viewer authentication with other services\n---\n\nBesides the player there are some services (such as Chat, Q&A and Combined Embed) that may also require viewer authentication. In order to make the authentication work across these services, additional steps need to be taken at the end of the authentication flow.\n\nThese services provide a URL, that must be used instead of the default pass url. This URL is sent in the hashConsumer query parameter by the service to the application.\n\nExample url in the hashConsumer for chat:\n\n```\nhttps://video.ibm.com/chat/authorize/12345678?resource=%2Fchat%2F12345678\n```\n\nExample script in native PHP that can authenticate the player and the services as well\n\n```js\n// Given a json token has already been constructed\n$json = json_encode($response);\n\n// Default hash consumer for the player\n$hashConsumer = 'https://video.ibm.com/embed/hashlock/pass';\n$query = [];\n\n// Check if there is a special hash consumer\nif (!empty($_GET['hashConsumer'])) {\n    $hashConsumer = $_GET['hashConsumer'];\n\n    // It's recommended to use a better URL parsing\n    // technique (like PSR-7 implementations)\n    $parts = parse_url($hashConsumer);\n\n    if (!empty($parts['query'])) {\n        parse_str($parts['query'], $query);\n    }\n\n    // Instead of concatenating url parts it's recommended to use\n    // a better URL parsing technique (like PSR-7 implementations)\n    $hashConsumer = $parts['scheme'].'://'.$parts['host'].$parts['path'];\n}\n\n$query['hash'] = $json;\n\n$hashConsumer = $hashConsumer.'?'.http_build_query($query);\n\nheader('Location: '.$hashConsumer);\n```\n","fileAbsolutePath":"/home/runner/work/video-streaming-developer-docs/video-streaming-developer-docs/src/pages/viewer-authentication-api-using-viewer-authentication-with-other-services.mdx"}}}}