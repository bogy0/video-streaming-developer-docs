(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{m9IB:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return o})),n.d(t,"default",(function(){return u}));n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("q1tI");var a=n("7ljp"),r=n("XbGe");n("qKvR");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o={},h={_frontmatter:o},i=r.a;function u(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(i,s({},h,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Besides the player there are some services (such as Chat, Q&A and Combined Embed) that may also require viewer authentication. In order to make the authentication work across these services, additional steps need to be taken at the end of the authentication flow."),Object(a.b)("p",null,"These services provide a URL, that must be used instead of the default pass url. This URL is sent in the hashConsumer query parameter by the service to the application."),Object(a.b)("p",null,"Example url in the hashConsumer for chat:"),Object(a.b)("pre",null,Object(a.b)("code",s({parentName:"pre"},{}),"https://video.ibm.com/chat/authorize/12345678?resource=%2Fchat%2F12345678\n")),Object(a.b)("p",null,"Example script in native PHP that can authenticate the player and the services as well"),Object(a.b)("pre",null,Object(a.b)("code",s({parentName:"pre"},{className:"language-js"}),"// Given a json token has already been constructed\n$json = json_encode($response);\n\n// Default hash consumer for the player\n$hashConsumer = 'https://video.ibm.com/embed/hashlock/pass';\n$query = [];\n\n// Check if there is a special hash consumer\nif (!empty($_GET['hashConsumer'])) {\n    $hashConsumer = $_GET['hashConsumer'];\n\n    // It's recommended to use a better URL parsing\n    // technique (like PSR-7 implementations)\n    $parts = parse_url($hashConsumer);\n\n    if (!empty($parts['query'])) {\n        parse_str($parts['query'], $query);\n    }\n\n    // Instead of concatenating url parts it's recommended to use\n    // a better URL parsing technique (like PSR-7 implementations)\n    $hashConsumer = $parts['scheme'].'://'.$parts['host'].$parts['path'];\n}\n\n$query['hash'] = $json;\n\n$hashConsumer = $hashConsumer.'?'.http_build_query($query);\n\nheader('Location: '.$hashConsumer);\n")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-viewer-authentication-api-using-viewer-authentication-with-other-services-mdx-b5ca684c96dff543cf5f.js.map